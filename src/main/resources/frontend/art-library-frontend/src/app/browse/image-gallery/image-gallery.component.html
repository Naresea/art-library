<div #scrollwindow (scroll)="updateScroll()" class="scrollwindow d-flex w-100 h-100 overflow-auto">
  <div #scrollpane class="scrollpane w-100" (click)="selectImage(undefined)"></div>
</div>

<ng-container *ngFor="let rowIdx of (domRows$$ | async)">
  <ng-container *ngIf="rowData$$ | async as rowData">
    <div class="scrollrow d-flex justify-content-around"
         [style.min-height]="thumbSize + 'px'"
         [style.max-height]="thumbSize + 'px'"
         [style.top]="rowData.transforms[rowIdx]">
      <ng-container *ngFor="let image of rowData.images[rowIdx]">
        <div *ngIf="image; else blankimage"
             class="scrollimage"
             style="border: 1px solid black; cursor: pointer; width: 256px; height: 256px;"
             [class.border-primary]="rowData.selected?.id === image.id"
             (click)="selectImage(image)">
          <img [lazyLoad]="getImageUrl(image)"/>
        </div>
        <ng-template #blankimage>
          <div style="width: 256px; height: 256px; opacity: 0;">
          </div>
        </ng-template>
      </ng-container>
    </div>
  </ng-container>
</ng-container>

<ng-container *ngIf="selectedImage$$ | async as selectedImage">
  <div (click)="selectImage(undefined)" style="position: absolute; left: 0; top: 0; bottom: 0; right: 0; display: flex; align-items: center; justify-content: center; background-color: rgba(0,0,0,0.9)">
    <img [lazyLoad]="getRealImageUrl(selectedImage)" style="max-width: 80%; max-height: 80%; pointer-events: none;"/>
  </div>
</ng-container>
